var Regex=(()=>{var g=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var B=(e,t)=>{for(var r in t)g(e,r,{get:t[r],enumerable:!0})},Z=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of W(t))!v.call(e,o)&&o!==r&&g(e,o,{get:()=>t[o],enumerable:!(n=q(t,o))||n.enumerable});return e};var z=e=>Z(g({},"__esModule",{value:!0}),e);var oe={};B(oe,{default:()=>ne,make:()=>Q,partial:()=>L});var N=class{#e;constructor(t){this.#e=t}toString(){return String(this.#e)}};function L(e,...t){if(Array.isArray(e?.raw))return new N(e.raw.flatMap((r,n)=>n<e.raw.length-1?[r,t[n]]:r).join(""));if(!t.length)return new N(e??"");throw new Error(`Unexpected arguments: ${JSON.stringify([e,...t])}`)}var s={DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS",GROUP_NAME:"GROUP_NAME",ENCLOSED_TOKEN:"ENCLOSED_TOKEN",INTERVAL_QUANTIFIER:"INTERVAL_QUANTIFIER",INVALID_INCOMPLETE_TOKEN:"INVALID_INCOMPLETE_TOKEN"},l={DEFAULT:"CC_DEFAULT",RANGE:"CC_RANGE",ENCLOSED_TOKEN:"CC_ENCLOSED_TOKEN",Q_TOKEN:"CC_Q_TOKEN",INVALID_INCOMPLETE_TOKEN:"CC_INVALID_INCOMPLETE_TOKEN"},O=(()=>{let e=!0;try{new RegExp("(?i-ms:)")}catch{e=!1}return e})(),S="&!#$%*+,.:;<=>?@^`~";function R(e,t){return t===s.CHAR_CLASS?e.replace(new RegExp(String.raw`[()\[\]{}|\\/\-${S}]`,"g"),"\\$&"):e.replace(/[()\[\]{}|\\^$*+?.]/g,"\\$&")}function I(e){return e.replace(new RegExp(String.raw`^([${S}])(?!\1)`),(t,r,n)=>`\\${t}${n+1===e.length?"":t}`)}function $(e){return e.replace(/^\^/,"\\^^")}function m(e,t){return A(e,String.raw`\\0(?!\d)`,"\\u{0}",t)}function C(e,t,r){let n=0;for(let[o]of e.matchAll(new RegExp(`[${R(t+r)}]`,"g")))if(n+=o===t?1:-1,n<0)return r;return n>0?t:""}function P(e,t,r){let n=e.replace(/\\./gsu,"");if(n.at(-1)==="\\")return"\\";if(t===s.DEFAULT)return C(n,"(",")");if(t===s.CHAR_CLASS&&!(r===l.ENCLOSED_TOKEN||r===l.Q_TOKEN))return C(n,"[","]");if(t===s.ENCLOSED_TOKEN||t===s.INTERVAL_QUANTIFIER||r===l.ENCLOSED_TOKEN||r===l.Q_TOKEN){if(n.includes("}"))return"}"}else if(t===s.GROUP_NAME&&n.includes(">"))return">";return""}var _=new RegExp(String.raw`
  (?<groupN> \(\?< (?! [=!] ) | \\k< )
| (?<enclosedT> \\[pPu]\{ )
| (?<qT> \\q\{ )
| (?<intervalQ> \{ )
| (?<incompleteT> \\ (?:
    $
  | c (?! [A-Za-z] )
  | u (?! [A-Fa-f\d]{4} ) [A-Fa-f\d]{0,3}
  | x (?! [A-Fa-f\d]{2} ) [A-Fa-f\d]?
  )
)
| \\ (?:
    c [A-Za-z]
  | u [A-Fa-f\d]{4}
  | x [A-Fa-f\d]{2}
  | 0 \d+
)
| \[\^
| \(\?[:=!<]
| (?<dp> [${S}] ) \k<dp>
| \\[1-9]\d*
| --
| \\? .
`.replace(/\s+/g,""),"gsu");function T(e,{regexContext:t=s.DEFAULT,charClassContext:r=l.DEFAULT,charClassDepth:n=0,lastPos:o=0}){_.lastIndex=o;let u;for(;u=_.exec(e);){let{0:a,groups:{groupN:c,enclosedT:f,qT:E,intervalQ:i,incompleteT:d}}=u;a==="["||a==="[^"?(n++,t=s.CHAR_CLASS,r=l.DEFAULT):a==="]"&&t===s.CHAR_CLASS?(n&&n--,n||(t=s.DEFAULT),r=l.DEFAULT):t===s.CHAR_CLASS?d?r=l.INVALID_INCOMPLETE_TOKEN:a==="-"?r=l.RANGE:f?r=l.ENCLOSED_TOKEN:E?r=l.Q_TOKEN:(a==="}"&&(r===l.ENCLOSED_TOKEN||r===l.Q_TOKEN)||r===l.INVALID_INCOMPLETE_TOKEN||r===l.RANGE)&&(r=l.DEFAULT):d?t=s.INVALID_INCOMPLETE_TOKEN:c?t=s.GROUP_NAME:f?t=s.ENCLOSED_TOKEN:i?t=s.INTERVAL_QUANTIFIER:(a===">"&&t===s.GROUP_NAME||a==="}"&&(t===s.ENCLOSED_TOKEN||t===s.INTERVAL_QUANTIFIER)||t===s.INVALID_INCOMPLETE_TOKEN)&&(t=s.DEFAULT)}return{regexContext:t,charClassContext:r,charClassDepth:n,lastPos:e.length-1}}function A(e,t,r,n){let o=new RegExp(String.raw`(?<found>${t})|\\?.`,"gsu"),u=0,a="";for(let{0:c,groups:{found:f}}of e.matchAll(o)){if(f&&(!n||n===s.DEFAULT==!u)){a+=r;continue}c==="["?u++:c==="]"&&u--,a+=c}return a}function w(e){let t=/(?<capture>\((?:(?!\?)|\?<[^>]+>))|\\?./gsu;return Array.from(e.matchAll(t)).filter(r=>r.groups.capture).length}function b(e,t){return e.replace(/\\([1-9]\d*)|\\?./gsu,(r,n)=>n?"\\"+(Number(n)+t):r)}var J=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|");function h(e){let t=new RegExp(String.raw`
\\ (?:
    c [A-Za-z]
  | p \{ (?<pPropOfStr> ${J} ) \}
  | [pP] \{ [^\}]+ \}
  | (?<qPropOfStr> q )
  | u (?: [A-Fa-f\d]{4} | \{ [A-Fa-f\d]+ \} )
  | x [A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
  `.replace(/\s+/g,""),"gsu"),r=!1,n;for(let{0:o,groups:u}of e.matchAll(t)){if(u.pPropOfStr||u.qPropOfStr||o==="["&&r)return!0;if(["-","--","&&"].includes(o))r=!1;else if(!["[","]"].includes(o)){if(r||n==="]")return!0;r=!0}n=o}return!1}function F(e,t,r){let n={raw:[]},o=[],u={};return e.raw.forEach((a,c)=>{let f=r(a,{...u,lastPos:0});if(n.raw.push(f.transformed),u=f.runningContext,c<e.raw.length-1){let E=t[c];if(E instanceof N){let i=r(E,{...u,lastPos:0});o.push(L(i.transformed)),u=i.runningContext}else o.push(E)}}),{template:n,values:o}}function K(e,t){e=String(e);let r="",n="";for(let[o]of e.matchAll(_)){r+=o,t=T(r,t);let{regexContext:u}=t;if(u===s.DEFAULT)if(o==="(")n+="(?:";else{if(/^\\[1-9]/.test(o))throw new Error(`Invalid delimal escape "${o}" with implicit flag n; replace with named backreference`);n+=o}else n+=o}return{transformed:n,runningContext:t}}var V=e=>e?"(?:)":"",M=/^\s$/,X=/^\\[\s#]$/,y=/^[ \t]$/,Y=/^\\[ \t]$/;function k(e,t){e=String(e);let r=!1,n=!1,o=!1,u="",a="",c="",f=!1,E=(i,{noPrefix:d=!1,postfix:p=""}={})=>(i=V(f&&!d)+i+p,f=!1,i);for(let[i]of e.matchAll(_)){if(o){i===`
`&&(o=!1,f=!0);continue}if(r){if(M.test(i))continue;r=!1,f=!0}else if(n){if(y.test(i))continue;n=!1}u+=i,t=T(u,t);let{regexContext:d,charClassContext:p}=t;if(i==="-"&&d===s.CHAR_CLASS&&c===l.RANGE)throw new Error("Invalid unescaped hyphen as the end value for a range");if(d===s.DEFAULT&&/^[?*+]\??$/.test(i)||d===s.INTERVAL_QUANTIFIER&&i==="{")a+=E(i,{noPrefix:!0,postfix:V(i==="?")});else if(d===s.DEFAULT)M.test(i)?r=!0:i.startsWith("#")?o=!0:X.test(i)?a+=E(i[1],{noPrefix:!0}):a+=E(i);else if(d===s.CHAR_CLASS&&i!=="["&&i!=="[^")if(y.test(i)&&(p===l.DEFAULT||p===l.RANGE||p===l.Q_TOKEN))n=!0;else{if(p===l.INVALID_INCOMPLETE_TOKEN)throw new Error(`Invalid incomplete token in character class: ${i}`);Y.test(i)&&(p===l.DEFAULT||p===l.Q_TOKEN)?a+=E(i[1],{noPrefix:!0}):p===l.DEFAULT?a+=E(I(m(i))):a+=E(i)}else a+=E(i);r||n||o||(c=p)}return{transformed:a,runningContext:t}}function j(e){let t=String.raw`\(\?:\)`;return e=A(e,`${t}(?:${t})+`,"(?:)",s.DEFAULT),e=A(e,String.raw`^${t}(?![?*+{])|${t}$|${t}(?=[()|])|(?<=[()|]|\(\?(?:[:=!]|<[=!]))${t}`,"",s.DEFAULT),e}function Q(e,...t){let r=this instanceof Function?this:RegExp;if(Array.isArray(e?.raw))return U(r,{flags:""},e,...t);if((typeof e=="string"||e===void 0)&&!t.length)return U.bind(null,r,{flags:e});if(Object.prototype.toString.call(e)==="[object Object]"&&!t.length)return U.bind(null,r,e);throw new Error(`Unexpected arguments: ${JSON.stringify([e,...t])}`)}function U(e,t,r,...n){let{flags:o="",__flag_n:u=!0,__flag_x:a=!0,__rake:c=t.__flag_x??!0}=t;if(/[vu]/.test(o))throw new Error("Flags v/u cannot be explicitly added since v is always enabled");a&&({template:r,values:n}=F(r,n,k)),u&&({template:r,values:n}=F(r,n,K));let f=0,E="",i={};return r.raw.forEach((d,p)=>{let G=r.raw[p]||r.raw[p+1];f+=w(d),E+=m(d,s.CHAR_CLASS),i=T(E,i);let{regexContext:x,charClassContext:H}=i;if(p<r.raw.length-1){let D=ee(n[p],o,x,H,G,f);f+=D.capturesAdded||0,E+=D.value}}),new e(c?j(E):E,`v${o}`)}function ee(e,t,r,n,o,u){if(e instanceof RegExp&&r!==s.DEFAULT)throw new Error("Cannot interpolate a RegExp at this position because the syntax context does not match");if(r===s.INVALID_INCOMPLETE_TOKEN||n===l.INVALID_INCOMPLETE_TOKEN)throw new Error("Interpolation preceded by invalid incomplete token");let a=e instanceof N,c;if(!(e instanceof RegExp)){e=String(e),a||(c=R(e,r));let f=P(c||e,r,n);if(f)throw new Error(`Unescaped stray "${f}" in the interpolated value would have side effects outside it`)}if(r===s.ENCLOSED_TOKEN||r===s.INTERVAL_QUANTIFIER||r===s.GROUP_NAME||n===l.ENCLOSED_TOKEN||n===l.Q_TOKEN)return{value:a?e:c};if(r===s.CHAR_CLASS){if(a){if(A(e,"^-|^&&|-$|&&$","")!==e)throw new Error("In character classes, a partial cannot use a range/set operator at its boundary; move the operation into the partial or the operator outside of it");let E=$(I(e));return{value:h(e)?`[${E}]`:m(E)}}return{value:h(c)?`[${c}]`:c}}if(e instanceof RegExp){let f=te(e,t),E=b(f.value,u);return{value:f.usedModifier?E:`(?:${E})`,capturesAdded:w(e.source)}}return a?{value:`(?:${e})`}:{value:o?`(?:${c})`:c}}function te(e,t){let r={i:null,m:null,s:null},n="\\n\\r\\u2028\\u2029",o=e.source;if(e.ignoreCase!==t.includes("i"))if(O)r.i=e.ignoreCase;else throw new Error("Pattern modifiers not supported, so the value of flag i on the interpolated RegExp must match the outer regex");if(e.dotAll!==t.includes("s")&&(O?r.s=e.dotAll:o=A(o,"\\.",e.dotAll?"[^]":`[^${n}]`,s.DEFAULT)),e.multiline!==t.includes("m")&&(O?r.m=e.multiline:(o=A(o,"\\^",e.multiline?`(?<=^|[${n}])`:"(?<![^])",s.DEFAULT),o=A(o,"\\$",e.multiline?`(?=$|[${n}])`:"(?![^])",s.DEFAULT))),O){let u=Object.keys(r),a=u.filter(f=>r[f]===!0).join(""),c=u.filter(f=>r[f]===!1).join("");if(c&&(a+=`-${c}`),a)return{value:`(?${a}:${o})`,usedModifier:!0}}return{value:o}}var re={make:Q,partial:L};var ne=re;return z(oe);})();
//! Regex.make 1.0.0-beta; Steven Levithan; MIT License
//# sourceMappingURL=regex-make.min.js.map
