var Regex=(()=>{var R=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var W=(e,t)=>{for(var n in t)R(e,n,{get:t[n],enumerable:!0})},Z=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of q(t))!x.call(e,o)&&o!==n&&R(e,o,{get:()=>t[o],enumerable:!(r=H(t,o))||r.enumerable});return e};var z=e=>Z(R({},"__esModule",{value:!0}),e);var ne={};W(ne,{default:()=>te,make:()=>y,partial:()=>L});var A=class{#e;constructor(t){this.#e=t}toString(){return String(this.#e)}};function L(e,...t){if(Array.isArray(e?.raw))return new A(e.raw.flatMap((n,r)=>r<e.raw.length-1?[n,t[r]]:n).join(""));if(!t.length)return new A(e??"");throw new Error(`Unexpected arguments: ${JSON.stringify([e,...t])}`)}var i={DEFAULT:"R_DEFAULT",CHAR_CLASS:"R_CHAR_CLASS",GROUP_NAME:"R_GROUP_NAME",ENCLOSED_TOKEN:"R_ENCLOSED_TOKEN",INTERVAL_QUANTIFIER:"R_INTERVAL_QUANTIFIER",INVALID_INCOMPLETE_TOKEN:"R_INVALID_INCOMPLETE_TOKEN"},l={DEFAULT:"CC_DEFAULT",RANGE:"CC_RANGE",ENCLOSED_TOKEN:"CC_ENCLOSED_TOKEN",Q_TOKEN:"CC_Q_TOKEN",INVALID_INCOMPLETE_TOKEN:"CC_INVALID_INCOMPLETE_TOKEN"},O=(()=>{let e=!0;try{new RegExp("(?i-ms:)")}catch{e=!1}return e})(),S="&!#$%*+,.:;<=>?@^`~";function g(e,t){return t===i.CHAR_CLASS?e.replace(new RegExp(String.raw`[()\[\]{}|\\/\-${S}]`,"g"),"\\$&"):e.replace(/[()\[\]{}|\\^$*+?.]/g,"\\$&")}function I(e){return e.replace(new RegExp(String.raw`^([${S}])(?!\1)`),(t,n,r)=>`\\${t}${r+1===e.length?"":t}`)}function D(e){return e.replace(/^\^/,"\\^^")}function m(e,t){return N(e,String.raw`\\0(?!\d)`,"\\u{0}",t)}function U(e,t,n){let r=0;for(let[o]of e.matchAll(new RegExp(`[${g(t+n)}]`,"g")))if(r+=o===t?1:-1,r<0)return n;return r>0?t:""}function $(e,t,n){let r=e.replace(/\\./gsu,"");if(r.at(-1)==="\\")return"\\";if(t===i.DEFAULT)return U(r,"(",")");if(t===i.CHAR_CLASS&&!(n===l.ENCLOSED_TOKEN||n===l.Q_TOKEN))return U(r,"[","]");if(t===i.ENCLOSED_TOKEN||t===i.INTERVAL_QUANTIFIER||n===l.ENCLOSED_TOKEN||n===l.Q_TOKEN){if(r.includes("}"))return"}"}else if(t===i.GROUP_NAME&&r.includes(">"))return">";return""}var _=new RegExp(String.raw`
  (?<groupN> \(\?< (?! [=!] ) | \\k< )
| (?<enclosedT> \\[pPu]\{ )
| (?<qT> \\q\{ )
| (?<intervalQ> \{ )
| (?<incompleteT> \\ (?:
    $
  | c (?! [A-Za-z] )
  | u (?! [A-Fa-f\d]{4} ) [A-Fa-f\d]{0,3}
  | x (?! [A-Fa-f\d]{2} ) [A-Fa-f\d]?
  )
)
| \\ (?:
    c [A-Za-z]
  | u [A-Fa-f\d]{4}
  | x [A-Fa-f\d]{2}
  | 0 \d+
)
| \[\^
| \(\?[:=!<]
| (?<dp> [${S}] ) \k<dp>
| --
| \\ .
| .
`.replace(/\s+/g,""),"gsu");function T(e,{regexContext:t=i.DEFAULT,charClassContext:n=l.DEFAULT,charClassDepth:r=0,lastPos:o=0}){_.lastIndex=o;let f;for(;f=_.exec(e);){let{0:s,groups:{groupN:E,enclosedT:c,qT:u,intervalQ:a,incompleteT:p}}=f;s==="["||s==="[^"?(r++,t=i.CHAR_CLASS,n=l.DEFAULT):s==="]"&&t===i.CHAR_CLASS?(r&&r--,r||(t=i.DEFAULT),n=l.DEFAULT):t===i.CHAR_CLASS?p?n=l.INVALID_INCOMPLETE_TOKEN:s==="-"?n=l.RANGE:c?n=l.ENCLOSED_TOKEN:u?n=l.Q_TOKEN:(s==="}"&&(n===l.ENCLOSED_TOKEN||n===l.Q_TOKEN)||n===l.INVALID_INCOMPLETE_TOKEN||n===l.RANGE)&&(n=l.DEFAULT):p?t=i.INVALID_INCOMPLETE_TOKEN:E?t=i.GROUP_NAME:c?t=i.ENCLOSED_TOKEN:a?t=i.INTERVAL_QUANTIFIER:(s===">"&&t===i.GROUP_NAME||s==="}"&&(t===i.ENCLOSED_TOKEN||t===i.INTERVAL_QUANTIFIER)||t===i.INVALID_INCOMPLETE_TOKEN)&&(t=i.DEFAULT)}return{regexContext:t,charClassContext:n,charClassDepth:r,lastPos:e.length-1}}function N(e,t,n,r){let o=new RegExp(String.raw`(?!${t})\\.|(?<found>${t})|.`,"gsu"),f=0,s="";for(let{0:E,groups:{found:c}}of e.matchAll(o)){if(c&&(!r||r===i.DEFAULT==!f)){s+=n;continue}E==="["?f++:E==="]"&&f--,s+=E}return s}var B=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|");function w(e){let t=new RegExp(String.raw`
\\ (?:
    c [A-Za-z]
  | p \{ (?<pPropOfStr> ${B} ) \}
  | [pP] \{ [^\}]+ \}
  | (?<qPropOfStr> q )
  | u (?: [A-Fa-f\d]{4} | \{ [A-Fa-f\d]+ \} )
  | x [A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
  `.replace(/\s+/g,""),"gsu"),n=!1,r;for(let{0:o,groups:f}of e.matchAll(t)){if(f.pPropOfStr||f.qPropOfStr||o==="["&&n)return!0;if(["-","--","&&"].includes(o))n=!1;else if(!["[","]"].includes(o)){if(n||r==="]")return!0;n=!0}r=o}return!1}function C(e){let t=String.raw`\(\?:\)`;return e=N(e,`${t}(?:${t})+`,"(?:)",i.DEFAULT),e=N(e,String.raw`^${t}(?![?*+{])|${t}$|${t}(?=[()|])|(?<=[()|]|\(\?(?:[:=!]|<[=!]))${t}`,"",i.DEFAULT),e}function h(e,t,n){let r={raw:[]},o=[],f={};return e.raw.forEach((s,E)=>{let c=n(s,{...f,lastPos:0});if(r.raw.push(c.transformed),f=c.runningContext,E<e.raw.length-1){let u=t[E];if(u instanceof A){let a=n(u,{...f,lastPos:0});o.push(L(a.transformed)),f=a.runningContext}else o.push(u)}}),{template:r,values:o}}function P(e,t){e=String(e);let n="",r="";for(let[o]of e.matchAll(_)){n+=o,t=T(n,t);let{regexContext:f}=t;if(f===i.DEFAULT)if(o==="(")r+="(?:";else{if(/^\\[1-9]/.test(o))throw new Error("Invalid delimal escape with implicit flag n; replace with named backreference");r+=o}else r+=o}return{transformed:r,runningContext:t}}var K=e=>e?"(?:)":"",b=/^\s$/,J=/^\\[\s#]$/,V=/^[ \t]$/,X=/^\\[ \t]$/;function M(e,t){e=String(e);let n=!1,r=!1,o=!1,f="",s="",E="",c=!1,u=(a,{noPrefix:p=!1,postfix:d=""}={})=>(a=K(c&&!p)+a+d,c=!1,a);for(let[a]of e.matchAll(_)){if(o){a===`
`&&(o=!1,c=!0);continue}if(n){if(b.test(a))continue;n=!1,c=!0}else if(r){if(V.test(a))continue;r=!1}f+=a,t=T(f,t);let{regexContext:p,charClassContext:d}=t;if(a==="-"&&p===i.CHAR_CLASS&&E===l.RANGE)throw new Error("Invalid unescaped hyphen as the end value for a range");if(p===i.DEFAULT&&/^[?*+]\??$/.test(a)||p===i.INTERVAL_QUANTIFIER&&a==="{")s+=u(a,{noPrefix:!0,postfix:K(a==="?")});else if(p===i.DEFAULT)b.test(a)?n=!0:a.startsWith("#")?o=!0:J.test(a)?s+=u(a[1],{noPrefix:!0}):s+=u(a);else if(p===i.CHAR_CLASS&&a!=="["&&a!=="[^")if(V.test(a)&&(d===l.DEFAULT||d===l.RANGE||d===l.Q_TOKEN))r=!0;else{if(d===l.INVALID_INCOMPLETE_TOKEN)throw new Error(`Invalid incomplete token in character class: ${a}`);X.test(a)&&(d===l.DEFAULT||d===l.Q_TOKEN)?s+=u(a[1],{noPrefix:!0}):d===l.DEFAULT?s+=u(I(m(a))):s+=u(a)}else s+=u(a);n||r||o||(E=d)}return{transformed:s,runningContext:t}}function y(e,...t){let n=this instanceof Function?this:RegExp;if(Array.isArray(e?.raw))return F(n,{flags:""},e,...t);if((typeof e=="string"||e===void 0)&&!t.length)return F.bind(null,n,{flags:e});if(Object.prototype.toString.call(e)==="[object Object]"&&!t.length)return F.bind(null,n,e);throw new Error(`Unexpected arguments: ${JSON.stringify([e,...t])}`)}function F(e,t,n,...r){let{flags:o="",__flag_n:f=!0,__flag_x:s=!0,__rake:E=!0}=t;if(/[vu]/.test(o))throw new Error("Flags v/u cannot be explicitly added since v is always enabled");s&&({template:n,values:r}=h(n,r,M)),f&&({template:n,values:r}=h(n,r,P));let c={},u="";return n.raw.forEach((a,p)=>{let d=n.raw[p]||n.raw[p+1];u+=m(a,i.CHAR_CLASS),c=T(u,c);let{regexContext:k,charClassContext:Q}=c;if(p<n.raw.length-1){let G=r[p],j=v(G,o,k,Q,d);u+=j}}),new e(E?C(u):u,`v${o}`)}function v(e,t,n,r,o){if(e instanceof RegExp&&n!==i.DEFAULT)throw new Error("Cannot interpolate a RegExp at this position because the syntax context does not match");if(n===i.INVALID_INCOMPLETE_TOKEN||r===l.INVALID_INCOMPLETE_TOKEN)throw new Error("Interpolation preceded by invalid incomplete token");let f=e instanceof A,s;if(!(e instanceof RegExp)){e=String(e),f||(s=g(e,n));let E=$(s||e,n,r);if(E)throw new Error(`Unescaped stray "${E}" in the interpolated value would have side effects outside it`)}if(n===i.ENCLOSED_TOKEN||n===i.INTERVAL_QUANTIFIER||n===i.GROUP_NAME||r===l.ENCLOSED_TOKEN||r===l.Q_TOKEN)return f?e:s;if(n===i.CHAR_CLASS){if(f){if(N(e,"^-|^&&|-$|&&$","")!==e)throw new Error("In character classes, a partial cannot use a range/set operator at its boundary; move the operation into the partial or the operator outside of it");let c=D(I(e));return w(e)?`[${c}]`:m(c)}return w(s)?`[${s}]`:s}if(e instanceof RegExp){let E=Y(e,t);return E.usedModifier?E.value:`(?:${E.value})`}return f?`(?:${e})`:o?`(?:${s})`:s}function Y(e,t){let n={i:null,m:null,s:null},r="\\n\\r\\u2028\\u2029",o=e.source;if(e.ignoreCase!==t.includes("i"))if(O)n.i=e.ignoreCase;else throw new Error("Pattern modifiers not supported, so the value of flag i on the interpolated RegExp must match the outer regex");if(e.dotAll!==t.includes("s")&&(O?n.s=e.dotAll:o=N(o,"\\.",e.dotAll?"[^]":`[^${r}]`,i.DEFAULT)),e.multiline!==t.includes("m")&&(O?n.m=e.multiline:(o=N(o,"\\^",e.multiline?`(?<=^|[${r}])`:"(?<![^])",i.DEFAULT),o=N(o,"\\$",e.multiline?`(?=$|[${r}])`:"(?![^])",i.DEFAULT))),O){let f=Object.keys(n),s=f.filter(c=>n[c]===!0).join(""),E=f.filter(c=>n[c]===!1).join("");if(E&&(s+=`-${E}`),s)return{value:`(?${s}:${o})`,usedModifier:!0}}return{value:o}}var ee={make:y,partial:L};var te=ee;return z(ne);})();
//! Regex.make 0.1.0 alpha; Steven Levithan; MIT License
//# sourceMappingURL=regex-make.min.js.map
