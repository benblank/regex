var Regex=(()=>{var S=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var B=(e,r)=>{for(var t in r)S(e,t,{get:r[t],enumerable:!0})},X=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of W(r))!v.call(e,o)&&o!==t&&S(e,o,{get:()=>r[o],enumerable:!(n=q(r,o))||n.enumerable});return e};var Z=e=>X(S({},"__esModule",{value:!0}),e);var se={};B(se,{default:()=>oe,make:()=>Q,partial:()=>_});var N=class{#e;constructor(r){this.#e=r}toString(){return String(this.#e)}};function _(e,...r){if(Array.isArray(e?.raw))return new N(e.raw.flatMap((t,n)=>n<e.raw.length-1?[t,r[n]]:t).join(""));if(!r.length)return new N(e??"");throw new Error(`Unexpected arguments: ${JSON.stringify([e,...r])}`)}var s={DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS",GROUP_NAME:"GROUP_NAME",ENCLOSED_TOKEN:"ENCLOSED_TOKEN",INTERVAL_QUANTIFIER:"INTERVAL_QUANTIFIER",INVALID_INCOMPLETE_TOKEN:"INVALID_INCOMPLETE_TOKEN"},E={DEFAULT:"CC_DEFAULT",RANGE:"CC_RANGE",ENCLOSED_TOKEN:"CC_ENCLOSED_TOKEN",Q_TOKEN:"CC_Q_TOKEN",INVALID_INCOMPLETE_TOKEN:"CC_INVALID_INCOMPLETE_TOKEN"},g=(()=>{let e=!0;try{new RegExp("(?i-ms:)")}catch{e=!1}return e})(),R="&!#$%*+,.:;<=>?@^`~";function h(e,r){return r===s.CHAR_CLASS?e.replace(new RegExp(String.raw`[()\[\]{}|\\/\-${R}]`,"g"),"\\$&"):e.replace(/[()\[\]{}|\\^$*+?.]/g,"\\$&")}function I(e){return e.replace(new RegExp(String.raw`^([${R}])(?!\1)`),(r,t,n)=>`\\${r}${n+1===e.length?"":r}`)}function b(e){return e.replace(/^\^/,"\\^^")}function L(e,r){return A(e,String.raw`\\0(?!\d)`,"\\u{0}",r)}function P(e,r,t){let n=0;for(let[o]of e.matchAll(new RegExp(`[${h(r+t)}]`,"g")))if(n+=o===r?1:-1,n<0)return t;return n>0?r:""}function K(e,r,t){let n=e.replace(/\\./gsu,"");if(n.at(-1)==="\\")return"\\";if(r===s.DEFAULT)return P(n,"(",")");if(r===s.CHAR_CLASS&&!(t===E.ENCLOSED_TOKEN||t===E.Q_TOKEN))return P(n,"[","]");if(r===s.ENCLOSED_TOKEN||r===s.INTERVAL_QUANTIFIER||t===E.ENCLOSED_TOKEN||t===E.Q_TOKEN){if(n.includes("}"))return"}"}else if(r===s.GROUP_NAME&&n.includes(">"))return">";return""}var m=new RegExp(String.raw`
  (?<groupN> \(\?< (?! [=!] ) | \\k< )
| (?<enclosedT> \\[pPu]\{ )
| (?<qT> \\q\{ )
| (?<intervalQ> \{ )
| (?<incompleteT> \\ (?:
    $
  | c (?! [A-Za-z] )
  | u (?! [A-Fa-f\d]{4} ) [A-Fa-f\d]{0,3}
  | x (?! [A-Fa-f\d]{2} ) [A-Fa-f\d]?
  )
)
| \\ (?:
    c [A-Za-z]
  | u [A-Fa-f\d]{4}
  | x [A-Fa-f\d]{2}
  | 0 \d+
)
| \[\^
| \(\?[:=!<>]
| (?<dp> [${R}] ) \k<dp>
| \\[1-9]\d*
| --
| \\? .
`.replace(/\s+/g,""),"gsu");function T(e,{regexContext:r=s.DEFAULT,charClassContext:t=E.DEFAULT,charClassDepth:n=0,lastPos:o=0}){m.lastIndex=o;let l;for(;l=m.exec(e);){let{0:a,groups:{groupN:c,enclosedT:f,qT:u,intervalQ:i,incompleteT:p}}=l;a==="["||a==="[^"?(n++,r=s.CHAR_CLASS,t=E.DEFAULT):a==="]"&&r===s.CHAR_CLASS?(n&&n--,n||(r=s.DEFAULT),t=E.DEFAULT):r===s.CHAR_CLASS?p?t=E.INVALID_INCOMPLETE_TOKEN:a==="-"?t=E.RANGE:f?t=E.ENCLOSED_TOKEN:u?t=E.Q_TOKEN:(a==="}"&&(t===E.ENCLOSED_TOKEN||t===E.Q_TOKEN)||t===E.INVALID_INCOMPLETE_TOKEN||t===E.RANGE)&&(t=E.DEFAULT):p?r=s.INVALID_INCOMPLETE_TOKEN:c?r=s.GROUP_NAME:f?r=s.ENCLOSED_TOKEN:i?r=s.INTERVAL_QUANTIFIER:(a===">"&&r===s.GROUP_NAME||a==="}"&&(r===s.ENCLOSED_TOKEN||r===s.INTERVAL_QUANTIFIER)||r===s.INVALID_INCOMPLETE_TOKEN)&&(r=s.DEFAULT)}return{regexContext:r,charClassContext:t,charClassDepth:n,lastPos:e.length-1}}function A(e,r,t,n){let o=new RegExp(String.raw`(?<found>${r})|\\?.`,"gsu"),l=0,a="";for(let c of e.matchAll(o)){let{0:f,groups:{found:u}}=c;if(u&&(!n||n===s.DEFAULT==!l)){t instanceof Function?a+=t(c):a+=t;continue}f==="["?l++:f==="]"&&l&&l--,a+=f}return a}function $(e){let r=/(?<capture>\((?:(?!\?)|\?<[^>]+>))|\\?./gsu;return Array.from(e.matchAll(r)).filter(t=>t.groups.capture).length}function k(e,r){return e.replace(/\\([1-9]\d*)|\\?./gsu,(t,n)=>n?"\\"+(Number(n)+r):t)}var z=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|");function C(e){let r=new RegExp(String.raw`
\\ (?:
    c [A-Za-z]
  | p \{ (?<pPropOfStr> ${z} ) \}
  | [pP] \{ [^\}]+ \}
  | (?<qPropOfStr> q )
  | u (?: [A-Fa-f\d]{4} | \{ [A-Fa-f\d]+ \} )
  | x [A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
  `.replace(/\s+/g,""),"gsu"),t=!1,n;for(let{0:o,groups:l}of e.matchAll(r)){if(l.pPropOfStr||l.qPropOfStr||o==="["&&t)return!0;if(["-","--","&&"].includes(o))t=!1;else if(!["[","]"].includes(o)){if(t||n==="]")return!0;t=!0}n=o}return!1}function F(e,r,t){let n={raw:[]},o=[],l={};return e.raw.forEach((a,c)=>{let f=t(a,{...l,lastPos:0});if(n.raw.push(f.transformed),l=f.runningContext,c<e.raw.length-1){let u=r[c];if(u instanceof N){let i=t(u,{...l,lastPos:0});o.push(_(i.transformed)),l=i.runningContext}else o.push(u)}}),{template:n,values:o}}function G(e){if(!J(e,String.raw`\(\?>`))return e;let r=new RegExp(String.raw`(?<groupStart>\(\?[:=!<>])|(?<backrefNum>\\[1-9]\d*)|\\?.`,"gsu"),t=3,n,o=0;do{n=!1;let l=0,a=0,c=NaN,f=()=>!Number.isNaN(c);r.lastIndex=Number.isNaN(c)?0:c+t;let u;for(;u=r.exec(e);){let{0:i,index:p,groups:{backrefNum:d,groupStart:w}}=u;if(i==="[")l++;else if(l)i==="]"&&l--;else if(i==="(?>"&&!f())c=p;else if(w&&f())a++;else if(i===")"&&f()){if(!a){o++;let O=`$AG$${o}`;e=`${e.slice(0,c)}(?:(?=(?<${O}>${e.slice(c+t,p)}))\\k<${O}>)${e.slice(p+1)}`,n=!0;break}a--}else if(d)throw new Error(`Invalid delimal escape "${i}" in regex with atomic group; check interpolated regexes`)}}while(n);return e=A(e,String.raw`\(\?<\$AG\$\d+>|\\k<\$AG\$(?<backrefNum>\d+)>`,({groups:{backrefNum:l}})=>l?`\\${l}`:"(",s.DEFAULT),e}function J(e,r){if(!new RegExp(r,"su").test(e))return!1;let t=new RegExp(String.raw`(?<found>${r})|\\?.`,"gsu"),n=0;for(let{0:o,groups:{found:l}}of e.matchAll(t))if(o==="[")n++;else if(n)o==="]"&&n--;else if(l)return!0;return!1}function x(e,r){e=String(e);let t="",n="";for(let[o]of e.matchAll(m)){t+=o,r=T(t,r);let{regexContext:l}=r;if(l===s.DEFAULT)if(o==="(")n+="(?:";else{if(/^\\[1-9]/.test(o))throw new Error(`Invalid delimal escape "${o}" with implicit flag n; replace with named backreference`);n+=o}else n+=o}return{transformed:n,runningContext:r}}var V=/^\s$/,Y=/^\\[\s#]$/,M=/^[ \t]$/,ee=/^\\[ \t]$/;function y(e,r){e=String(e);let t=!1,n=!1,o=!1,l="",a="",c="",f=!1,u=(i,{prefix:p=!0,postfix:d=!1}={})=>(i=(f&&p?"(?:)":"")+i+(d?"(?:)":""),f=!1,i);for(let[i]of e.matchAll(m)){if(o){i===`
`&&(o=!1,f=!0);continue}if(t){if(V.test(i))continue;t=!1,f=!0}else if(n){if(M.test(i))continue;n=!1}l+=i,r=T(l,r);let{regexContext:p,charClassContext:d}=r;if(i==="-"&&p===s.CHAR_CLASS&&c===E.RANGE)throw new Error("Invalid unescaped hyphen as the end value for a range");if(p===s.DEFAULT&&/^[?*+]\??$/.test(i)||p===s.INTERVAL_QUANTIFIER&&i==="{")a+=u(i,{prefix:!1,postfix:i==="?"});else if(p===s.DEFAULT)V.test(i)?t=!0:i.startsWith("#")?o=!0:Y.test(i)?a+=u(i[1],{prefix:!1}):a+=u(i);else if(p===s.CHAR_CLASS&&i!=="["&&i!=="[^")if(M.test(i)&&(d===E.DEFAULT||d===E.RANGE||d===E.Q_TOKEN))n=!0;else{if(d===E.INVALID_INCOMPLETE_TOKEN)throw new Error(`Invalid incomplete token in character class: ${i}`);ee.test(i)&&(d===E.DEFAULT||d===E.Q_TOKEN)?a+=u(i[1],{prefix:!1}):d===E.DEFAULT?a+=u(I(L(i))):a+=u(i)}else a+=u(i);t||n||o||(c=d)}return{transformed:a,runningContext:r}}function j(e){let r=String.raw`\(\?:\)`;return e=A(e,`${r}(?:${r})+`,"(?:)",s.DEFAULT),e=A(e,String.raw`^${r}(?![?*+{])|${r}$|${r}(?=[()|\\])|(?<=[()|>]|\(\?(?:[:=!]|<[=!]))${r}`,"",s.DEFAULT),e}function Q(e,...r){let t=this instanceof Function?this:RegExp;if(Array.isArray(e?.raw))return U(t,{flags:""},e,...r);if((typeof e=="string"||e===void 0)&&!r.length)return U.bind(null,t,{flags:e});if({}.toString.call(e)==="[object Object]"&&!r.length)return U.bind(null,t,e);throw new Error(`Unexpected arguments: ${JSON.stringify([e,...r])}`)}function U(e,r,t,...n){let{flags:o="",__flagN:l=!0,__flagX:a=!0,__rake:c=r.__flagX??!0}=r;if(/[vu]/.test(o))throw new Error("Flags v/u cannot be explicitly added since v is always enabled");a&&({template:t,values:n}=F(t,n,y)),l&&({template:t,values:n}=F(t,n,x));let f=0,u="",i={};return t.raw.forEach((p,d)=>{let w=t.raw[d]||t.raw[d+1];f+=$(p),u+=L(p,s.CHAR_CLASS),i=T(u,i);let{regexContext:O,charClassContext:H}=i;if(d<t.raw.length-1){let D=re(n[d],o,O,H,w,f);f+=D.capturesAdded||0,u+=D.value}}),u=G(u),new e(c?j(u):u,`v${o}`)}function re(e,r,t,n,o,l){if(e instanceof RegExp&&t!==s.DEFAULT)throw new Error("Cannot interpolate a RegExp at this position because the syntax context does not match");if(t===s.INVALID_INCOMPLETE_TOKEN||n===E.INVALID_INCOMPLETE_TOKEN)throw new Error("Interpolation preceded by invalid incomplete token");let a=e instanceof N,c;if(!(e instanceof RegExp)){e=String(e),a||(c=h(e,t));let f=K(c||e,t,n);if(f)throw new Error(`Unescaped stray "${f}" in the interpolated value would have side effects outside it`)}if(t===s.ENCLOSED_TOKEN||t===s.INTERVAL_QUANTIFIER||t===s.GROUP_NAME||n===E.ENCLOSED_TOKEN||n===E.Q_TOKEN)return{value:a?e:c};if(t===s.CHAR_CLASS){if(a){if(A(e,"^-|^&&|-$|&&$","")!==e)throw new Error("In character classes, a partial cannot use a range/set operator at its boundary; move the operation into the partial or the operator outside of it");let u=b(I(e));return{value:C(e)?`[${u}]`:L(u)}}return{value:C(c)?`[${c}]`:c}}if(e instanceof RegExp){let f=te(e,r),u=k(f.value,l);return{value:f.usedModifier?u:`(?:${u})`,capturesAdded:$(e.source)}}return a?{value:`(?:${e})`}:{value:o?`(?:${c})`:c}}function te(e,r){let t={i:null,m:null,s:null},n="\\n\\r\\u2028\\u2029",o=e.source;if(e.ignoreCase!==r.includes("i"))if(g)t.i=e.ignoreCase;else throw new Error("Pattern modifiers not supported, so the value of flag i on the interpolated RegExp must match the outer regex");if(e.dotAll!==r.includes("s")&&(g?t.s=e.dotAll:o=A(o,"\\.",e.dotAll?"[^]":`[^${n}]`,s.DEFAULT)),e.multiline!==r.includes("m")&&(g?t.m=e.multiline:(o=A(o,"\\^",e.multiline?`(?<=^|[${n}])`:"(?<![^])",s.DEFAULT),o=A(o,"\\$",e.multiline?`(?=$|[${n}])`:"(?![^])",s.DEFAULT))),g){let l=Object.keys(t),a=l.filter(f=>t[f]===!0).join(""),c=l.filter(f=>t[f]===!1).join("");if(c&&(a+=`-${c}`),a)return{value:`(?${a}:${o})`,usedModifier:!0}}return{value:o}}var ne={make:Q,partial:_};var oe=ne;return Z(se);})();
//! Regex.make 1.0.0-beta; Steven Levithan; MIT License
//# sourceMappingURL=regex-make.min.js.map
