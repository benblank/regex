var Regex=(()=>{var O=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var M=(e,n)=>{for(var t in n)O(e,t,{get:n[t],enumerable:!0})},V=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of $(n))!K.call(e,i)&&i!==t&&O(e,i,{get:()=>n[i],enumerable:!(r=C(n,i))||r.enumerable});return e};var b=e=>V(O({},"__esModule",{value:!0}),e);var G={};M(G,{default:()=>q,make:()=>P,partial:()=>N});var p=class{#e;constructor(n){this.#e=n}toString(){return String(this.#e)}};function N(e,...n){if(Array.isArray(e?.raw))return new p(e.raw.flatMap((t,r)=>r<e.raw.length-1?[t,n[r]]:t).join(""));if(!n.length)return new p(e??"");throw new Error(`Unexpected arguments: ${JSON.stringify([e,...n])}`)}var o={DEFAULT:"R_DEFAULT",CHAR_CLASS:"R_CHAR_CLASS",GROUP_NAME:"R_GROUP_NAME",ENCLOSED_TOKEN:"R_ENCLOSED_TOKEN",INTERVAL_QUANTIFIER:"R_INTERVAL_QUANTIFIER",INVALID_INCOMPLETE_TOKEN:"R_INVALID_INCOMPLETE_TOKEN"},E={DEFAULT:"CC_DEFAULT",ENCLOSED_TOKEN:"CC_ENCLOSED_TOKEN",Q_TOKEN:"CC_Q_TOKEN",INVALID_INCOMPLETE_TOKEN:"CC_INVALID_INCOMPLETE_TOKEN"},_=(()=>{let e=!0;try{new RegExp("(?i-ms:)")}catch{e=!1}return e})(),R="&!#$%*+,.:;<=>?@^`~";function S(e,n){return n===o.CHAR_CLASS?e.replace(new RegExp(String.raw`[()\[\]{}|\\/\-${R}]`,"g"),"\\$&"):e.replace(/[()\[\]{}|\\^$*+?.]/g,"\\$&")}function F(e){return e.replace(new RegExp(`^[${R}]`),(n,t)=>`\\${n}${t+1===e.length?"":n}`)}function m(e,n){return T(e,String.raw`\\0(?!\d)`,"\\u{0}",n)}function w(e,n,t){let r=e.replace(/\\./gsu,"");if(r.at(-1)==="\\")return"\\";if(n===o.DEFAULT&&r.includes(")"))return")";if(n===o.CHAR_CLASS&&t===E.DEFAULT){let i=0;for(let[f]of r.matchAll(/[\[\]]/g))if(i+=f==="["?1:-1,i<0)return"]"}return(n===o.ENCLOSED_TOKEN||n===o.INTERVAL_QUANTIFIER||t===E.ENCLOSED_TOKEN||t===E.Q_TOKEN)&&r.includes("}")?"}":n===o.GROUP_NAME&&r.includes(">")?">":""}var d=new RegExp(String.raw`
  (?<groupN> \(\?< (?! [=!] ) | \\k< )
| (?<enclosedT> \\[pPu]\{ )
| (?<qT> \\q\{ )
| (?<intervalQ> \{ )
| (?<incompleteT> \\ (?:
    $
  | c (?! [A-Za-z] )
  | u (?! [A-Fa-f\d]{4} ) [A-Fa-f\d]{0,3}
  | x (?! [A-Fa-f\d]{2} ) [A-Fa-f\d]?
  )
)
| \\ (?:
    c [A-Za-z]
  | u [A-Fa-f\d]{4}
  | x [A-Fa-f\d]{2}
)
| \\.
| .
`.replace(/\s+/g,""),"gsu");function L(e,{regexContext:n=o.DEFAULT,charClassContext:t=E.DEFAULT,charClassDepth:r=0,lastPos:i=0}){d.lastIndex=i;let f;for(;f=d.exec(e);){let{0:s,groups:{groupN:l,enclosedT:a,qT:u,intervalQ:A,incompleteT:c}}=f;s==="["?(r++,n=o.CHAR_CLASS,t=E.DEFAULT):s==="]"&&n===o.CHAR_CLASS?(r&&r--,r||(n=o.DEFAULT),t=E.DEFAULT):n===o.CHAR_CLASS?c?t=E.INVALID_INCOMPLETE_TOKEN:a?t=E.ENCLOSED_TOKEN:u?t=E.Q_TOKEN:(s==="}"&&(t===E.ENCLOSED_TOKEN||t===E.Q_TOKEN)||t===E.INVALID_INCOMPLETE_TOKEN)&&(t=E.DEFAULT):c?n=o.INVALID_INCOMPLETE_TOKEN:l?n=o.GROUP_NAME:a?n=o.ENCLOSED_TOKEN:A?n=o.INTERVAL_QUANTIFIER:(s===">"&&n===o.GROUP_NAME||s==="}"&&(n===o.ENCLOSED_TOKEN||n===o.INTERVAL_QUANTIFIER)||n===o.INVALID_INCOMPLETE_TOKEN)&&(n=o.DEFAULT)}return{regexContext:n,charClassContext:t,charClassDepth:r,lastPos:e.length-1}}function T(e,n,t,r){let i=new RegExp(String.raw`(?!${n})\\.|(?<found>${n})|.`,"gsu"),f=0,s="";for(let{0:l,groups:{found:a}}of e.matchAll(i)){if(a&&(!r||r===o.DEFAULT==!f)){s+=t;continue}l==="["?f++:l==="]"&&f--,s+=l}return s}var y=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|");function I(e){let n=new RegExp(String.raw`
\\ (?:
    c [A-Za-z]
  | p \{ (?<pPropOfStr> ${y} ) \}
  | [pP] \{ [^\}]+ \}
  | (?<qPropOfStr> q )
  | u (?: [A-Fa-f\d]{4} | \{ [A-Fa-f\d]+ \} )
  | x [A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
  `.replace(/\s+/g,""),"gsu"),t=!1,r;for(let{0:i,groups:f}of e.matchAll(n)){if(f.pPropOfStr||f.qPropOfStr||i==="["&&t)return!0;if(["-","--","&&"].includes(i))t=!1;else if(!["[","]"].includes(i)){if(t||r==="]")return!0;t=!0}r=i}return!1}function D(e,n){let t={raw:[]},r=[],i={};return e.raw.forEach((f,s)=>{let l=g(f,{...i,lastPos:0});if(t.raw.push(l.transformedPattern),i=l.runningContext,s<e.raw.length-1){let a=n[s];if(a instanceof p){let u=g(a,{...i,lastPos:0});r.push(N(u.transformedPattern)),i=u.runningContext}else r.push(a)}}),{template:t,values:r}}function g(e,n){e=String(e);let t=/^\s$/,r=/^[ \t]$/,i=!1,f=!1,s=!1,l="",a="";for(let[u]of e.matchAll(d)){l+=u,n=L(l,n);let{regexContext:A,charClassContext:c}=n;if(s){u===`
`&&(s=!1,a+="(?:)");continue}if(i){if(t.test(u))continue;i=!1,a+="(?:)"}if(f){if(r.test(u))continue;f=!1}if(A===o.DEFAULT)t.test(u)?i=!0:u==="#"?s=!0:a+=u;else if(A===o.CHAR_CLASS)if(r.test(u)&&(c===E.DEFAULT||c===E.Q_TOKEN))f=!0;else{if(c===E.INVALID_INCOMPLETE_TOKEN)throw new Error(`Invalid incomplete token in character class: ${u}`);E.DEFAULT,a+=u}else a+=u}return{transformedPattern:a,runningContext:n}}function P(e,...n){let t=this instanceof Function?this:RegExp;if(Array.isArray(e?.raw))return U(t,"",e,...n);if((typeof e=="string"||e===void 0)&&!n.length)return U.bind(null,t,e??"");throw new Error(`Unexpected arguments: ${JSON.stringify([e,...n])}`)}function U(e,n,t,...r){if(/[vu]/.test(n))throw new Error("Flags v/u cannot be explicitly added since v is always enabled");({template:t,values:r}=D(t,r));let i=!1,f={},s="";return t.raw.forEach((l,a)=>{l!==""&&(i=!0),s+=m(l,o.CHAR_CLASS),f=L(s,f);let{regexContext:u,charClassContext:A}=f;if(a<t.raw.length-1){let c=r[a];(c instanceof RegExp||c instanceof p)&&(i=!0);let h=Q(c,n,u,A,i);s+=h}}),new e(s,`v${n}`)}function Q(e,n,t,r,i){if(e instanceof RegExp&&t!==o.DEFAULT)throw new Error("Cannot interpolate a RegExp at this position because the syntax context does not match");if(t===o.INVALID_INCOMPLETE_TOKEN||r===E.INVALID_INCOMPLETE_TOKEN)throw new Error("Interpolation preceded by invalid incomplete token");let f=e instanceof p,s;if(!(e instanceof RegExp)){e=String(e),f||(s=S(e,t));let l=w(s||e,t,r);if(l)throw new Error(`Unescaped stray "${l}" in the interpolated value would have side effects outside it`)}if(t===o.ENCLOSED_TOKEN||t===o.INTERVAL_QUANTIFIER||t===o.GROUP_NAME||r===E.ENCLOSED_TOKEN||r===E.Q_TOKEN)return f?e:s;if(t===o.CHAR_CLASS){if(f){let l=F(e);return I(e)?`[${l}]`:m(l)}return I(s)?`[${s}]`:s}if(e instanceof RegExp){let l=j(e,n);return l.usedModifier?l.value:`(?:${l.value})`}return f?`(?:${e})`:i?`(?:${s})`:s}function j(e,n){let t={i:null,m:null,s:null},r="\\n\\r\\u2028\\u2029",i=e.source;if(e.ignoreCase!==n.includes("i"))if(_)t.i=e.ignoreCase;else throw new Error("Pattern modifiers not supported, so the value of flag i on the interpolated RegExp must match the outer regex");if(e.dotAll!==n.includes("s")&&(_?t.s=e.dotAll:i=T(i,"\\.",e.dotAll?"[^]":`[^${r}]`,o.DEFAULT)),e.multiline!==n.includes("m")&&(_?t.m=e.multiline:(i=T(i,"\\^",e.multiline?`(?<=^|[${r}])`:"(?<![^])",o.DEFAULT),i=T(i,"\\$",e.multiline?`(?=$|[${r}])`:"(?![^])",o.DEFAULT))),_){let f=Object.keys(t),s=f.filter(a=>t[a]===!0).join(""),l=f.filter(a=>t[a]===!1).join("");if(l&&(s+=`-${l}`),s)return{value:`(?${s}:${i})`,usedModifier:!0}}return{value:i}}var k={make:P,partial:N};var q=k;return b(G);})();
//! Regex.make 0.1.0 alpha; Steven Levithan; MIT License
//# sourceMappingURL=regex-make.min.js.map
