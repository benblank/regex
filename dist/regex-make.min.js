var Regex=(()=>{var R=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var q=(e,n)=>{for(var t in n)R(e,t,{get:n[t],enumerable:!0})},W=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of k(n))!H.call(e,o)&&o!==t&&R(e,o,{get:()=>n[o],enumerable:!(r=j(n,o))||r.enumerable});return e};var x=e=>W(R({},"__esModule",{value:!0}),e);var ee={};q(ee,{default:()=>Y,make:()=>V,partial:()=>_});var d=class{#e;constructor(n){this.#e=n}toString(){return String(this.#e)}};function _(e,...n){if(Array.isArray(e?.raw))return new d(e.raw.flatMap((t,r)=>r<e.raw.length-1?[t,n[r]]:t).join(""));if(!n.length)return new d(e??"");throw new Error(`Unexpected arguments: ${JSON.stringify([e,...n])}`)}var i={DEFAULT:"R_DEFAULT",CHAR_CLASS:"R_CHAR_CLASS",GROUP_NAME:"R_GROUP_NAME",ENCLOSED_TOKEN:"R_ENCLOSED_TOKEN",INTERVAL_QUANTIFIER:"R_INTERVAL_QUANTIFIER",INVALID_INCOMPLETE_TOKEN:"R_INVALID_INCOMPLETE_TOKEN"},f={DEFAULT:"CC_DEFAULT",RANGE:"CC_RANGE",ENCLOSED_TOKEN:"CC_ENCLOSED_TOKEN",Q_TOKEN:"CC_Q_TOKEN",INVALID_INCOMPLETE_TOKEN:"CC_INVALID_INCOMPLETE_TOKEN"},T=(()=>{let e=!0;try{new RegExp("(?i-ms:)")}catch{e=!1}return e})(),S="&!#$%*+,.:;<=>?@^`~";function w(e,n){return n===i.CHAR_CLASS?e.replace(new RegExp(String.raw`[()\[\]{}|\\/\-${S}]`,"g"),"\\$&"):e.replace(/[()\[\]{}|\\^$*+?.]/g,"\\$&")}function I(e){return e.replace(new RegExp(String.raw`^([${S}])(?!\1)`),(n,t,r)=>`\\${n}${r+1===e.length?"":n}`)}function h(e){return e.replace(/^\^/,"\\^^")}function L(e,n){return N(e,String.raw`\\0(?!\d)`,"\\u{0}",n)}function U(e,n,t){let r=0;for(let[o]of e.matchAll(new RegExp(`[${w(n+t)}]`,"g")))if(r+=o===n?1:-1,r<0)return t;return r>0?n:""}function D(e,n,t){let r=e.replace(/\\./gsu,"");if(r.at(-1)==="\\")return"\\";if(n===i.DEFAULT)return U(r,"(",")");if(n===i.CHAR_CLASS&&!(t===f.ENCLOSED_TOKEN||t===f.Q_TOKEN))return U(r,"[","]");if(n===i.ENCLOSED_TOKEN||n===i.INTERVAL_QUANTIFIER||t===f.ENCLOSED_TOKEN||t===f.Q_TOKEN){if(r.includes("}"))return"}"}else if(n===i.GROUP_NAME&&r.includes(">"))return">";return""}var O=new RegExp(String.raw`
  (?<groupN> \(\?< (?! [=!] ) | \\k< )
| (?<enclosedT> \\[pPu]\{ )
| (?<qT> \\q\{ )
| (?<intervalQ> \{ )
| (?<incompleteT> \\ (?:
    $
  | c (?! [A-Za-z] )
  | u (?! [A-Fa-f\d]{4} ) [A-Fa-f\d]{0,3}
  | x (?! [A-Fa-f\d]{2} ) [A-Fa-f\d]?
  )
)
| \\ (?:
    c [A-Za-z]
  | u [A-Fa-f\d]{4}
  | x [A-Fa-f\d]{2}
  | 0 \d+
)
| \[\^
| \(\?[:=!<]
| (?<dp> [${S}] ) \k<dp>
| --
| \\ .
| .
`.replace(/\s+/g,""),"gsu");function m(e,{regexContext:n=i.DEFAULT,charClassContext:t=f.DEFAULT,charClassDepth:r=0,lastPos:o=0}){O.lastIndex=o;let u;for(;u=O.exec(e);){let{0:s,groups:{groupN:l,enclosedT:E,qT:c,intervalQ:a,incompleteT:p}}=u;s==="["||s==="[^"?(r++,n=i.CHAR_CLASS,t=f.DEFAULT):s==="]"&&n===i.CHAR_CLASS?(r&&r--,r||(n=i.DEFAULT),t=f.DEFAULT):n===i.CHAR_CLASS?p?t=f.INVALID_INCOMPLETE_TOKEN:s==="-"?t=f.RANGE:E?t=f.ENCLOSED_TOKEN:c?t=f.Q_TOKEN:(s==="}"&&(t===f.ENCLOSED_TOKEN||t===f.Q_TOKEN)||t===f.INVALID_INCOMPLETE_TOKEN||t===f.RANGE)&&(t=f.DEFAULT):p?n=i.INVALID_INCOMPLETE_TOKEN:l?n=i.GROUP_NAME:E?n=i.ENCLOSED_TOKEN:a?n=i.INTERVAL_QUANTIFIER:(s===">"&&n===i.GROUP_NAME||s==="}"&&(n===i.ENCLOSED_TOKEN||n===i.INTERVAL_QUANTIFIER)||n===i.INVALID_INCOMPLETE_TOKEN)&&(n=i.DEFAULT)}return{regexContext:n,charClassContext:t,charClassDepth:r,lastPos:e.length-1}}function N(e,n,t,r){let o=new RegExp(String.raw`(?!${n})\\.|(?<found>${n})|.`,"gsu"),u=0,s="";for(let{0:l,groups:{found:E}}of e.matchAll(o)){if(E&&(!r||r===i.DEFAULT==!u)){s+=t;continue}l==="["?u++:l==="]"&&u--,s+=l}return s}var v=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|");function g(e){let n=new RegExp(String.raw`
\\ (?:
    c [A-Za-z]
  | p \{ (?<pPropOfStr> ${v} ) \}
  | [pP] \{ [^\}]+ \}
  | (?<qPropOfStr> q )
  | u (?: [A-Fa-f\d]{4} | \{ [A-Fa-f\d]+ \} )
  | x [A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
  `.replace(/\s+/g,""),"gsu"),t=!1,r;for(let{0:o,groups:u}of e.matchAll(n)){if(u.pPropOfStr||u.qPropOfStr||o==="["&&t)return!0;if(["-","--","&&"].includes(o))t=!1;else if(!["[","]"].includes(o)){if(t||r==="]")return!0;t=!0}r=o}return!1}function $(e){let n=String.raw`\(\?:\)`;return e=N(e,`${n}(?:${n})+`,"(?:)",i.DEFAULT),e=N(e,String.raw`^${n}(?![?*+{])|${n}$|${n}(?=[()|])|(?<=[()|]|\(\?(?:[:=!]|<[=!]))${n}`,"",i.DEFAULT),e}function M(e,n){let t={raw:[]},r=[],o={};return e.raw.forEach((u,s)=>{let l=b(u,{...o,lastPos:0});if(t.raw.push(l.transformed),o=l.runningContext,s<e.raw.length-1){let E=n[s];if(E instanceof d){let c=b(E,{...o,lastPos:0});r.push(_(c.transformed)),o=c.runningContext}else r.push(E)}}),{template:t,values:r}}var C=e=>e?"(?:)":"",P=/^\s$/,Z=/^\\[\s#]$/,K=/^[ \t]$/,z=/^\\[ \t]$/;function b(e,n){e=String(e);let t=!1,r=!1,o=!1,u="",s="",l="",E=!1,c=(a,{noPrefix:p=!1,postfix:A=""}={})=>(a=C(E&&!p)+a+A,E=!1,a);for(let[a]of e.matchAll(O)){if(o){a===`
`&&(o=!1,E=!0);continue}if(t){if(P.test(a))continue;t=!1,E=!0}else if(r){if(K.test(a))continue;r=!1}u+=a,n=m(u,n);let{regexContext:p,charClassContext:A}=n;if(a==="-"&&p===i.CHAR_CLASS&&l===f.RANGE)throw new Error("Invalid unescaped hyphen as the end value for a range");if(p===i.DEFAULT&&/^[?*+]\??$/.test(a)||p===i.INTERVAL_QUANTIFIER&&a==="{")s+=c(a,{noPrefix:!0,postfix:C(a==="?")});else if(p===i.DEFAULT)P.test(a)?t=!0:a.startsWith("#")?o=!0:Z.test(a)?s+=c(a[1],{noPrefix:!0}):s+=c(a);else if(p===i.CHAR_CLASS&&a!=="["&&a!=="[^")if(K.test(a)&&(A===f.DEFAULT||A===f.RANGE||A===f.Q_TOKEN))r=!0;else{if(A===f.INVALID_INCOMPLETE_TOKEN)throw new Error(`Invalid incomplete token in character class: ${a}`);z.test(a)&&(A===f.DEFAULT||A===f.Q_TOKEN)?s+=c(a[1],{noPrefix:!0}):A===f.DEFAULT?s+=c(I(L(a))):s+=c(a)}else s+=c(a);t||r||o||(l=A)}return{transformed:s,runningContext:n}}function V(e,...n){let t=this instanceof Function?this:RegExp;if(Array.isArray(e?.raw))return F(t,{flags:""},e,...n);if((typeof e=="string"||e===void 0)&&!n.length)return F.bind(null,t,{flags:e});if(Object.prototype.toString.call(e)==="[object Object]"&&!n.length)return F.bind(null,t,e);throw new Error(`Unexpected arguments: ${JSON.stringify([e,...n])}`)}function F(e,n,t,...r){let{flags:o="",__flag_x:u=!0,__rake:s=!0}=n;if(/[vu]/.test(o))throw new Error("Flags v/u cannot be explicitly added since v is always enabled");u&&({template:t,values:r}=M(t,r));let l={},E="";return t.raw.forEach((c,a)=>{let p=t.raw[a]||t.raw[a+1];E+=L(c,i.CHAR_CLASS),l=m(E,l);let{regexContext:A,charClassContext:y}=l;if(a<t.raw.length-1){let Q=r[a],G=B(Q,o,A,y,p);E+=G}}),new e(s?$(E):E,`v${o}`)}function B(e,n,t,r,o){if(e instanceof RegExp&&t!==i.DEFAULT)throw new Error("Cannot interpolate a RegExp at this position because the syntax context does not match");if(t===i.INVALID_INCOMPLETE_TOKEN||r===f.INVALID_INCOMPLETE_TOKEN)throw new Error("Interpolation preceded by invalid incomplete token");let u=e instanceof d,s;if(!(e instanceof RegExp)){e=String(e),u||(s=w(e,t));let l=D(s||e,t,r);if(l)throw new Error(`Unescaped stray "${l}" in the interpolated value would have side effects outside it`)}if(t===i.ENCLOSED_TOKEN||t===i.INTERVAL_QUANTIFIER||t===i.GROUP_NAME||r===f.ENCLOSED_TOKEN||r===f.Q_TOKEN)return u?e:s;if(t===i.CHAR_CLASS){if(u){if(N(e,"^-|^&&|-$|&&$","")!==e)throw new Error("In character classes, a partial cannot use a range/set operator at its boundary; move the operation into the partial or the operator outside of it");let E=h(I(e));return g(e)?`[${E}]`:L(E)}return g(s)?`[${s}]`:s}if(e instanceof RegExp){let l=J(e,n);return l.usedModifier?l.value:`(?:${l.value})`}return u?`(?:${e})`:o?`(?:${s})`:s}function J(e,n){let t={i:null,m:null,s:null},r="\\n\\r\\u2028\\u2029",o=e.source;if(e.ignoreCase!==n.includes("i"))if(T)t.i=e.ignoreCase;else throw new Error("Pattern modifiers not supported, so the value of flag i on the interpolated RegExp must match the outer regex");if(e.dotAll!==n.includes("s")&&(T?t.s=e.dotAll:o=N(o,"\\.",e.dotAll?"[^]":`[^${r}]`,i.DEFAULT)),e.multiline!==n.includes("m")&&(T?t.m=e.multiline:(o=N(o,"\\^",e.multiline?`(?<=^|[${r}])`:"(?<![^])",i.DEFAULT),o=N(o,"\\$",e.multiline?`(?=$|[${r}])`:"(?![^])",i.DEFAULT))),T){let u=Object.keys(t),s=u.filter(E=>t[E]===!0).join(""),l=u.filter(E=>t[E]===!1).join("");if(l&&(s+=`-${l}`),s)return{value:`(?${s}:${o})`,usedModifier:!0}}return{value:o}}var X={make:V,partial:_};var Y=X;return x(ee);})();
//! Regex.make 0.1.0 alpha; Steven Levithan; MIT License
//# sourceMappingURL=regex-make.min.js.map
